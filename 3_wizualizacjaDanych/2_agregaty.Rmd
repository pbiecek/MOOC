---
title: "Wykresy, które podsumowują dane"
author: "poskRamiacze danych"
date: "sezon 3 / odcinek 2 <br><br><br><br>Naciśnij `A` by zamienić slajdy na ciągły tekst. <br> Naciśnij `T` by wyświetlić spis treści."
output:
  slidy_presentation:
    highlight: default
    css: ../style.css
    font_adjustment: 0
    footer: "poskRamiacze danych / wizualizacja / agregaty danych"

---
# O czym jest ten odcinek?

Gdy dane są duże i zawierają wiele obserwacji niesposób przedstawiać każdy punkt osobno. Może ich być zbyt wiele przez co wykres zamieni się w wielką plątaninę punktów i krzywych. W takim przypadku często lepszym rozwiązaniu jest przedstawienie podsumowania danych.

W tym odcinku dowiemy się

- Jak tworzyć wykresy trendu, przedstawiające wygładzone średnie?
- Jak tworzyć wykresy ramka wąsy / pudełkowe, przedstawiające pięć liczb Tukeya?
- Jak tworzyć histogram, przedstawiający rozkład wartości?
- Jak tworzyć wykresy słupkowe, przedstawiające liczebności obserwacji?

W tym odcinku będziemy pracować ze zbiorem danych `auta2012`.

---

# Geometria `geom_smooth()` - wykresy trendu 

Gdy chcemy przedstawić zależność, pomiędzy parą zmiennych, często wykorzystywaną jest geometria punktowa `geom_point()`. Jednak, gdy punktów jest wiele, taka prezentacja może być  mało czytelna. W takich przypadkach warto rozważyć geometrię `geom_smooth()` prezentującą wygładzoną lokalną średnią.

Przedstawimy tę geometrię na przykładzie ceny i roku produkcji samochodu, a dokładniej modelu Volkswagen Passat.

```{r, fig.height=4, fig.width=5, message=FALSE}
library(SmarterPoland)
skody <- auta2012 %>%
              filter(Marka == 'Skoda', Model == 'Octavia')

```

---

# Geometria `geom_smooth()` - wykresy trendu 

```{r, fig.height=4, fig.width=5, message=FALSE}
ggplot(skody, aes(x=Rok.produkcji, y = Cena.w.PLN)) + 
  geom_point()
```

---

# Geometria `geom_smooth()` - wykresy trendu 

```{r, fig.height=4, fig.width=5, message=FALSE}
ggplot(skody, aes(x=Rok.produkcji, y = Cena.w.PLN)) + 
  geom_smooth()
```

---

# Geometria `geom_smooth()` - wykresy trendu 

```{r, fig.height=4, fig.width=5, message=FALSE}
ggplot(skody, aes(x=Rok.produkcji, y = Cena.w.PLN)) + 
  geom_smooth(se=FALSE)
```

---

# Geometria `geom_smooth()` - wykresy trendu 

```{r, fig.height=4, fig.width=5, message=FALSE}
ggplot(skody, aes(x=Rok.produkcji, y = Cena.w.PLN)) + 
  geom_point() + geom_smooth(se=FALSE)
```

---

# Geometria `geom_smooth()` - wykresy trendu 

```{r, fig.height=4, fig.width=5, message=FALSE}
ggplot(skody, aes(x=Rok.produkcji, y = Cena.w.PLN)) + 
  geom_point() + geom_smooth(se=FALSE, size=5)
```

---

# Geometria `geom_smooth()` - wykresy trendu 

```{r, fig.height=4, fig.width=5, message=FALSE}
ggplot(skody, aes(x=Rok.produkcji, y = Cena.w.PLN)) + 
  geom_point() + geom_smooth(se=FALSE, size=5) + 
  coord_trans(y = "log10")
```

---

# Geometria `geom_smooth()` - wykresy trendu 

```{r, fig.height=4, fig.width=5, message=FALSE}
ggplot(skody, aes(x=Rok.produkcji, y = Cena.w.PLN)) + 
  geom_point() + 
  geom_smooth(se=FALSE, size=5) +
  geom_smooth(method="lm", se=FALSE, size=5, color="red")

```

---

# Geometria `geom_boxplot()` - wykresy ramka - wąsy

Wybierzmy pięcioletnie modele Volkswagena i porównajmy marki

```{r, fig.height=4, fig.width=5}

skody <- auta2012 %>%
              filter(Marka == 'Skoda', Rok.produkcji==2007)

ggplot(skody, aes(x=Model, y = Cena.w.PLN)) + 
  geom_point()
```

---

# Geometria `geom_boxplot()` - wykresy ramka - wąsy

```{r, fig.height=4, fig.width=5, message=FALSE}
ggplot(skody, aes(x=Model, y = Cena.w.PLN)) + 
  geom_boxplot()
```

---

# Geometria `geom_boxplot()` - wykresy ramka - wąsy

```{r, fig.height=4, fig.width=5, message=FALSE}
skody$Model <- reorder(skody$Model, skody$Cena.w.PLN, mean)

ggplot(skody, aes(x=Model, y = Cena.w.PLN)) + 
  geom_boxplot()
```

---

# Geometria `geom_boxplot()` - wykresy ramka - wąsy

```{r, fig.height=4, fig.width=5, message=FALSE}
ggplot(skody, aes(x=Model, y = Cena.w.PLN)) + 
  geom_boxplot(fill="black")
```

---

# Geometria `geom_boxplot()` - wykresy ramka - wąsy

```{r, fig.height=4, fig.width=5, message=FALSE}
ggplot(skody, aes(x=Model, y = Cena.w.PLN, fill=Model)) + 
  geom_boxplot()

```

---

# Geometria `geom_hist()` - histogram

```{r, fig.height=4, fig.width=5}
ggplot(skody, aes(x=Cena.w.PLN)) + 
  geom_histogram()
```

---

# Geometria `geom_hist()` - histogram

```{r, fig.height=4, fig.width=5, message=FALSE}
ggplot(skody, aes(x=Cena.w.PLN, fill=Model)) + 
  geom_histogram()
```

---

# Geometria `geom_bar()` - wykresy słupkowe

```{r, fig.height=4, fig.width=5}
ggplot(skody, aes(x=Model)) + 
  geom_histogram()
```

---

# Geometria `geom_bar()` - wykresy słupkowe

```{r, fig.height=4, fig.width=5, message=FALSE}
ggplot(skody, aes(x=Model, fill=Rodzaj.paliwa)) + 
  geom_bar()
```

---

# Geometria `geom_bar()` - wykresy słupkowe

```{r, fig.height=4, fig.width=5, message=FALSE}
skody %>% 
  group_by(Model, Rodzaj.paliwa) %>%
  summarise(liczba = n())

ggplot(skody, aes(x=Model, fill=Rodzaj.paliwa)) + 
  geom_bar(position="fill")
```


---

# Gdzie szukać dalej

- Więcej informacji o tym jak budować wykresy w pakiecie ggplot2 znaleźć można w rozdziale 4 książki *,,Przewodnik po pakiecie R''*. Więcej informacji o tej książce http://www.biecek.pl/R/

- Wiele przydatnych wskazówek można również znaleźć w internetowej książce *,,Cookbook for R''* http://www.cookbook-r.com/Graphs/

- Bardzo rozbudowana dokumentacja dla pakietu ggplot2 dostępna jest na stronie *,,ggplot2''* http://docs.ggplot2.org/current/index.html

