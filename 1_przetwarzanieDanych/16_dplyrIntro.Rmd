---
title: "Czyszczenie i wprowadzenie do obróbki danych"
author: "pogRomcy danych"
date: "sezon 1 / odcinek 16 <br><br><br><br>Naciśnij `A` by zamienić slajdy na ciągły tekst. <br> Naciśnij `T` by wyświetlić spis treści."
output:
  slidy_presentation:
    includes:
      in_header: ../tracking.html
    highlight: default
    css: ../style.css
    font_adjustment: 0
    footer: "pogRomcy danych / przetwarzanie / czyszczenie i obróbka"

---


Sciagawka z zabawy danymi w dplyr

http://www.rstudio.com/wp-content/uploads/2015/01/data-wrangling-cheatsheet1.pdf

wiecej sciagawek

http://www.rstudio.com/resources/cheatsheets/


# O czym jest ten odcinek

W tym odcinku nauczymy się

---

Pracując z danymi często wyróżnia się dwa stany,
dane surowe i dane przetworzone.

Dane surowe pobieramy ze źródła danych, zakładając że na podstawie tych danych możemy odpowiedzieć, na interesujące nas pytania.
Przykładowo, szczegółowe informacje o wszystkich ofertach sprzedaży aut, to przykład danych surowych, ponieważ pobierany te dane dokładnie w tej postaci.

Pytania, które nas interesują dotyczą często podzbiory całych danych, i to podzbioru, na którym wykonywane są jakieś transformacje.
Takie przekształcone dane nazywamy danymi przetworzonymi.

Przetwarzanie może być bardzo różne, 
mając zbiór wypowiedzi, możemy liczyć częstość wystąpień poszczególnych słów,
możemy z liczb wyciągać ostatnie cyfry, czy z dat dni tygodnia.

Dzisiaj poznamy fantastyczne narzędzie, bardzo pomagające w przetwarzaniu danych.
To narzędzie to biblioteka dplyr


---



Od Krzyśka o czyszczeniu danych





### Dane

Przykładowe dane:
```{r}
D <- data.frame(
  imie= c("Maja","Anna","Zosia","Joanna"),
  gęstość= c("0.4","0,2","0,05","0,35")
  )
D <- data.frame(sapply(D,as.character), stringsAsFactors=FALSE)
```

Po wczytaniu danych otrzymamy tabelę:
```{r}
D
```

Klasy poszczególnych zmiennych w tabeli D:
```{r}
sapply(D,class)
```

Błędy w danych które chcemy naprawić:

1. Zamień nazwę kolumny: gęstość na częstość,
2. Zamień wpisy "Zosia" na "Zofia",
2. Zamień przecinek na kropkę dziesiętną.


### Naprawa nazwy kolumny - gęstość

Numer kolumny o błędnej nazwie "gęstość":
```{r}
nr.kol <- which(colnames(D)=="gęstość")
nr.kol
```

Zamiana nazwy kolumny:
```{r}
names(D)[nr.kol] <- paste("częstość")
D
```

### Naprawa błędnych wpisów - Zosia

```{r}
D$imie[D$imie=="Zosia"] <- "Zofia"
D
```

### Naprawa błędnych wpisów - liczb

Ponieważ takich pomyłek/liczb może być więcej można zastosować funkcję: sub:
```{r}
D$częstość <- sub(",", ".", D$częstość, fixed = TRUE)
D
sapply(D,class)
```

```{r}
D$imie <- as.factor(D$imie)
D$częstość <- as.numeric(D$częstość)
sapply(D,class)
D
```

Do rozwiązywania powyższych problemów bardzo pomocne mogą okazać się funkcje: base::replace oraz car::recode.


