---
title: "Cechy logiczne"
author: "pogRomcy danych"
date: "sezon 1 / odcinek 13 <br><br> Wszelkie prawa zastrzeżone.<br> Wykorzystanie możliwe wyłącznie za zgodą autora.  <br><br><br><br>Naciśnij `A` by zamienić slajdy na ciągły tekst. <br> Naciśnij `T` by wyświetlić spis treści."
output:
  slidy_presentation:
    includes:
      in_header: ../tracking.html
    highlight: default
    css: ../style.css
    font_adjustment: 0
    footer: "pogRomcy danych / przetwarzanie / zmienne logiczne"

---

# O czym jest ten odcinek

W tym odcinku nauczymy się

- Jakie zmienne / wartości / cechy określa się terminem cechy logiczne?
- Jakie podstawowe operacje można logiczne na cechach logiczne?
- Jak podsumowywać / opisywać cechy ilościowe?

Do ilustracji tych zagadnień wykorzystamy dwa zbiory danych. Pierwszy, mały zbiór danych, to `koty_ptaki` a drugi, znacznie większy, to `auta2012`.

---

# Wczytanie danych

```{r, warning=FALSE, message=FALSE}
library(SmarterPoland)
head(koty_ptaki, 2)
head(auta2012, 2)
```

Dla zbioru danych `koty_ptaki` każdy wiersz opisuje charakterystyki jednego gatunku.

Dla zbioru danych `auta2012` każdy wiersz tego zbioru danych opisuje jedną ofertę sprzedaży auta. Każda kolumna opisuje jedną cechę / właściwość tej oferty.

---


+ Dodać funkcję is.na() i sum(is.na()), wszystkie is.... są świetnym przykładem na TRUE / FALSE

# Cechy logiczne

Każdą zmienną można przedstawić jako zmienną jakościową lub ilościową. Ale w pewnych sytuacjach wygodnie jest wyróżnić bardziej szczegółową klasyfikację.
Cechy logiczne, to takie cechy, które przyjmować mogą tylko trzy wartości, prawdę (oznaczany w R przez `TRUE`), fałsz (oznaczany w R przez `FALSE`) oraz brak informacji (oznaczany w R przez `NA`).

Cechy logiczne mogą być traktowane jako cechy jakościowe o dwóch poziomach. 
Cechy takie można tworzyć używając tak zwanych warunków logicznych. Przykładem warunku logicznego są operatory `>` (większy), `>=` (większy równy), `==` (równy), `<=` (mniejszy równy), `<` (mniejszy). 

---

## Logika trójwartościowa

```{r, warning=FALSE}
liczby_1_5 = 1:5
outer(liczby_1_5, liczby_1_5, "<=")
```

Cechy logiczne w R przyjmować mogą jedną z trzech wartości, `TRUE` (logiczna prawda), `FALSE` (logiczny fałsz) i `NA` (wartość nieustalona). 

Zamiast pełnych nazw `TRUE` i `FALSE` można również korzystać ze skrótów `T` i `F`.

Wyrażenia logiczne najczęściej składa się połączywszy operatorami logicznymi `|` (logiczne lub) i `&` (logiczne i).

```{r, warning=FALSE}
TRUE | FALSE
(4 > 2) | ("A" == "a")
```

Jaki jest wynik logicznego lub pomiędzy wartością TRUE (prawda) i NA (brak informacji)?

Tabliczkę logicznego dodawania i mnożenia podsumowuje poniższa instrukcja.

```{r, warning=FALSE}
TRUE_FALSE_NA = c(TRUE, FALSE, NA)
tabliczka_dodawania <- outer(TRUE_FALSE_NA, TRUE_FALSE_NA, "|")
rownames(tabliczka_dodawania) <- TRUE_FALSE_NA
colnames(tabliczka_dodawania) <- TRUE_FALSE_NA
tabliczka_dodawania

tabliczka_mnozenia <- outer(TRUE_FALSE_NA, TRUE_FALSE_NA, "&")
rownames(tabliczka_mnozenia) <- TRUE_FALSE_NA
colnames(tabliczka_mnozenia) <- TRUE_FALSE_NA
tabliczka_mnozenia
```

---

## Statystyki opisowe

Traktując zmienną logiczną jak dwuwartościową zmienną jakościową, możemy używać na niej np. funkcji do tabel liczebności.

Zbudujmy zmienną `czy_to_kot`, wektor o wartościach logicznych `TRUE` i `FALSE`, następnie przedstawmy jej podsumowanie.

```{r, warning=FALSE}
czy_to_kot = koty_ptaki$druzyna == "Kot"
table(czy_to_kot)
```

I przykład dla danych o samochodach

```{r, warning=FALSE}
pochodziZPolski = auta2012$Kraj.aktualnej.rejestracji == "Polska"
table(pochodziZPolski)

starszyNiz5Lat = auta2012$Rok.produkcji < 2007
table(starszyNiz5Lat)
```

---

# Zadania:
+ Sprawdź ile samochodów ma cenę ofertową poniżej 2 000 pln.
+ Sprawdź jaki procent samochodów ma silniki o pojemności ponad 1500 cm3.

# Odpowiedzi:
+ `r sum(auta2012$Cena.w.PLN < 2000, na.rm=TRUE)`
+ `r mean(auta2012$Pojemnosc.skokowa > 1500, na.rm=TRUE)`

---

# Logiczne 'i' oraz logiczne 'lub'

Cechy logiczne można przetwarzać używając również operatorów logicznych, w tym logicznego lub `|` oraz logicznego i `&`.

Nazwy zmiennych i funkcji potrafią być długie, a R jest wrażliwy na wielkość liter i nie wybaczy nawet małych różnic.
Przepisywanie nazw często kończy się literówkami, które z kolei prowadzą do trudnych w odnalezieniu błędów.
W programie RStudio po wpisaniu kilku pierwszych liter nazwy funkcji, nazwy zmiennej lub nazwy kolumny w ramce danych klawiszem TAB włącza się uzupełnianie nazwy. W zależności od kontekstu wyświetlana jest lista nazw pasujących do pierwszych wprowadzonych znaków.


```{r, warning=FALSE}
pochodziZPolski = auta2012$Kraj.aktualnej.rejestracji == "Polska"
starszyNiz5Lat = auta2012$Rok.produkcji < 2007
pochodziZPolskiIStarszyNiz5Lat = pochodziZPolski & starszyNiz5Lat
table(pochodziZPolskiIStarszyNiz5Lat)
```

---

# Zadania:
+ Sprawdź ile samochodów zarejestrowanych w Polsce ma cenę ofertową poniżej 2 000 pln.
+ Sprawdź jaki procent samochodów ma silniki o pojemności ponad 1500 cm3 oraz jest napędzanych olejem napędowym.

# Odpowiedzi:
+ `r sum(auta2012$Cena.w.PLN < 2000 & auta2012$Kraj.aktualnej.rejestracji == "Polska", na.rm=TRUE)`
+ `r mean(auta2012$Pojemnosc.skokowa > 1500 & auta2012$Rodzaj.paliwa == 'olej napedowy (diesel)', na.rm=TRUE)`




