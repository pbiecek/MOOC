---
title: "Zbiory danych"
author: "pogRomcy danych"
date: "sezon 1 / odcinek 1 <br><br><br><br>Naciśnij `A` by zamienić slajdy na ciągły tekst <br> Naciśnij `T` by wyświetlić spis treści"
output:
  slidy_presentation:
    includes:
      in_header: ../tracking.html
    highlight: default
    css: ../style.css
    font_adjustment: 0
    footer: "pogRomcy danych / zbiory danych"

---

# O czym jest ten odcinek

Praca z danymi możę być bardzo różnorodna. Podczas kursu ,,Pogromcy Danych'' będziemy tę różnorodność przybliżać. W tym celu będziemy pracować na zbiorach danych o różnej wielkości (od kilkunastu do kilkuset tysięcy wierszy), różnym stopniu złożoności (od dwóch do dwóch tysięcy kolumn), oraz o różnym formacie (dane tekstowe, ilościowe, jakościowe). 

Aby ułatwić dostęp do tak różnych zbiorów danych zebraliśmy je wszystkie w jednym pakiecie o nazwie `PogromcyDanych`. Znaleźć można w nim najróżniejsze dane, w tym o cenach ofertowych aut, dane ankietowe dotyczące badań społecznych, informacje o zmianach indeksów giełdowych, imionach noworodków, wynikach skoków narciarskich czy o wynikach leczenia pacjentek z nowotworem piersi.



Aby ten pakiet zainstalować należy w programie R wykonać instrukcję (wystarczy wykonać ją raz). Pobierze ona z Internetu wszystkie te zbiory danych oraz zainstaluje na dysku.

```{r, eval=FALSE}
install.packages("PogromcyDanych")
```

Po zainstalowaniu, aby korzystać z tych zbiorów danych, należy pakiet `PogromcyDanych` włączyć.
Pakiet włącza się poniższą instrukcją (należy ją wykonać po każdym uruchomieniu programu R).

```{r,  message=FALSE}
library(PogromcyDanych)
```

Na kolejnych slajdach przedstawimy wszystkie znajdujące się w tym pakiecie zbiory danych.

---

# Dwie wersje językowe

Kurs ,,Pogromcy Danych'' jest prowadzony w dwóch wersjach językowych, polskiej i angielskiej. 
Aby nie kopiować dwukrownie danych dla obu wersji językowych po wczytaniu pakietu `PogromcyDanych` dostępne są dane w języku polskim.

Aby przełączyć się na wersję angielską należy użyć polecenia `setLang()` tak jak na poniższym przykładzie. Ta funkcja przetłumaczy polskie nazwy danych (też nazwy kolumn i wartości) na ich angielskojęzyczne odpowiedniki.

```{r, eval=FALSE}
setLang("eng")
```

W wyniku jej działania do przestrzeni nazw wkopiowane będą następujące zbiory danych:

Nazwa polska      | Nazwa angielska    | Co to za dane?
------------------|--------------------|-------------------------------------------------
koty_ptaki        | cats_birds         | Charakterystyki 13 gatunków
imiona_warszawa   | warsaw_names       | Imiona noworotków w Warszawie
mandatySejmik2014 | votes2014          | Wyniki wyborów samorządowych 2014  
auta2012          | auta2012           | Ceny ofertowe aut w roku 2012
WIG               | WIG                | Indeks WIG w roku 2014
pearson           | pearson            | Dane o wzroście Pearsona
galton            | galton             | Dane o wzroście Galtona
skiJumps2013      | skiJumps2013       | Wyniki skoków narciarskich w sezonie 2013/2014
skiJumps2013labels| skiJumps2013labels | Wyjaśnienia nazw kolumn
diagnoza          | diagnosis          | Dane z projektu Diagnoza Społeczna
diagnozaDict      | diagnosisDict      | Wyjaśnienia nazw kolumn
serialeIMDB       | seriesIMDB         | Dane o serialach na bazie IMDB
TCGA_BRCA         | TCGA_BRCA          | Dane o pacjentkach z nowotworem piersi

Instrukcja `setLang("pol")` tłumaczy z powrotem na polskie nazwy.


---

# Najszybsze koty i ptaki na świecie

Zbiór danych `koty_ptaki` powstał jako tzw. ,,toy-example''. Jest to niewielki (13 wierszy 7 kolumn) zbiór, który można w całości wyświetlić na ekranie i na którym można przećwiczyć podstawowe operacje na danych.

W danych zestawiono charakterystyki dla 13 wybranych gatunków przedstawionych w kolejnych wierszach. Wybrane gatunki to najszybsi przedstawiciele kotów i ptaków. Każdy wiersz to informacje o innym gatunku. 

Kolejne kolumny w tym zbiorze danych przedstawiają:

* nazwę gatunku,
* maksymalną osobniczą wagę w kilogramach i maksymalną długość ciała w metrach, 
* maksymalną prędkość (dla ptaków w locie poziomym, nie w nurkowaniu) w kilometrach na godzinę, 
* obszar zamieszkania oraz żywotność w latach,
* ostatnia kolumna określa czy gatunek jest dużym kotem czy ptakiem. 

Funkcją `head()` możemy wyświetlić pierwsze 6 wierszy z tego zbioru danych.

```{r,  message=FALSE}
head(koty_ptaki)
```

---

# Imiona noworodków w Warszawie

Zbiór danych `imiona_warszawa` przygotowaliśmy po to, by przedstawiać metody analizy trendów oraz metody analizy napisów.

W tym zbiorze danych zawarto informację o liczbie urodzonych noworodków o danym imieniu w Warszawie w kolejnych miesiącach w okresie od roku 2004 do 2014. Dane te są pobrane ze strony http://gorny.edu.pl/imiona/index.php, na której można znaleźć również informacje o aktualnej liczbie urodzin. 

W tym zbiorze danych jest 84816 wierszy, dane dotyczą 696 różnych imion od tych najpopularnijeszych do bardzo rzadkich. 

Kolejne kolumny w tym zbiorze danych przedstawiają:

* imię i płeć dziecka,
* rok i miesiąc którego dotyczy ta statystyka,
* liczba noworodków o danym imieniu urodzonych w Warszawie w danym roku i miesiącu.

Funkcją `head()` wyświetlamy pierwsze 6 wierszy.

```{r,  message=FALSE}
head(imiona_warszawa)
```

Funckją `levels()` wyświetlamy listę różnych imion, które są opisane w tym zbiorze danych.

```{r,  message=FALSE}
levels(imiona_warszawa$imie)
```

---

# Wyniki wyborów samorządowych w 2014

Zbiór danych `mandatySejmik2014` przygotowaliśmy po to, by pokazać jak można analizować lub wizualizować dane przestrzenne. Dane pobrano ze stron Państwowej Komisji Wyborczej (http://wybory2014.pkw.gov.pl/pl/). 

Dane przedstawiają informacje o liczbie wygranych mandatów w sejmikach w wyborach samorządowych w Polsce w roku 2014. Zbiór danych zawiera 16 wierszy i 9 kolumn. Każdy wiersz przedstawia wyniki dla innego województwa.

Kolejne kolumny opisują:

* nazwę województwa, 
* liczbę zdobytych mandatów przez PSL, PiS, PO, SLD i inne partie,
* jaki procent z uprawnionych do głosowania stanowi procent ważnych głosów,
* długość i szerokość geograficzną środka geograficznego województwa.

Poniżej prezentujemy pierwsze 6 wierszy z tego zbioru danych.

```{r,  message=FALSE}
head(mandatySejmik2014)
```

---

# Ceny ofertowa używanych aut w roku 2012

Zbiór danych `auta2012` przygotowaliśmy po to, by dać możliwość pracy z dużym i ciekawym zbiorem danych o transakcjach. Dane transakcyjne są zazwyczaj bardzo długie, a sposób ich przetwarzania jest specyficzny.

Dane zostały pobrane w roku 2012 z serwisu ogłoszeń `otomoto.pl`. Zbiór danych zawiera informacje o ofertach dla przeszło 207 tysięcy ogłoszeń sprzedaży auta. 

Każda oferta (każdy wiersz) opisana jest przez 21 zmiennych, w tym:

* cenę, walutę i informację czy jest to cena brutto czy netto,
* informacja o mocy silnika w koniach mechanicznych i kW, oraz jego pojemności,
* informacja o modelu, marce, wersji auta,
* informacja o rodzaju napędu, roku produkcji oraz przebiegu (w km),
* informacja o kolorze, liczbie drzwi, kraju pochodzenia, kraju rejestracji oraz wyposażeniu.

Informacja o wyposażeniu jest opisana przez napis z wartościami rozdzielanymi przecinkiem, przez co sam napis może być bardzo długi.

Poniżej przedstawiamy 6 pierwszych wierszy z tego zbioru danych.

```{r,  message=FALSE}
head(auta2012)
```

---

# Indeks WIG z Giełdy Papierów Wartościowych

Zbiór danych `WIG` przygotowaliśmy po to, by przyjrzeć się analizie i wizualizacji danych o dłuższych szeregach czasowych, w tym przypadku o dziennych notowaniach na giełdzie. 

Ze strony Giełdy Papierów Wartościowych http://www.gpwinfostrefa.pl/GPWIS2/pl/index/ pobrano dzienne notowania dla indeksu WIG (Warszawski Indeks Giełdowy) z okresu grudzień 2013 - listopad 2014.

W kolejnych kolumnach przedstawione jest:

* data, której dotyczą notowania,
* kurs otwarcia, zamknięcia, kurs minimalny i maksymalny,
* zmiana kursu oraz wartość obrotów w tysiącach złotych.

W zbiorze danych jest 248 wierszy, każdy wiersz odpowiada notowaniom z jednego dnia. W soboty, niedziele i święta giełda jest zamknięta, stąd ta liczba dni z notowaniami.

Poniżej przedstawiamy pierwszych 6 wierszy z tego zbioru danych.

```{r,  message=FALSE}
head(WIG)
```

---

# Wzrost rodziców i dzieci

Słowo regresja wywodzi się z pionierskich badań Francisa Galtona i Karla Pearsona nad zależnością wzrostu dzieci i rodziców. 

Oryginalne zbiory danych obu tych badaczy są dostępne w zmiennych `galton` i `pearson`. Na bazie tych zbiorów danych można opisywać zależność pomiędzy wzrostem syna a ojca (`pearson`) oraz zależność pomiędzy ważoną średnią z wzrostu rodziców (`galton`) z wzrostem syna.

Poniżej przedstawiamy pierwszych 6 wierszy z każdego ze zbiorów danych. W zbiorze danych `galton` znajduje się 928 wierszy a w zbiorze danych `pearson` znajduje się 1078 wierszy.

```{r,  message=FALSE}
head(galton)
head(pearson)
```

---

# Wyniki skoków narciarskich

W zbiorze danych `skiJumps2013` zebrane są wyniki skoków narciarskich z sezonu 2013/2014. Ten zbiór danych został przygotowany na potrzebę konkursu na wizualizacje danych podczas konferencji [PAZUR](http://estymator.ue.poznan.pl/pazur/).

W zbiorze danych znajduje się 2130 wierszy, każdy wiersz opisuje jeden oddany skok w zawodach w skokach narciarskich z sezonu 2013/2014.

Każdy skok opisuje 16 kolumn, znaczenie poszczególnych kolumn jest opisane w zbiorze danych `skiJumps2013labels`.

W zbiorze danych `skiJumps2013`, dla każdego oddanego skoku znaleźć można informacje o:

* konkursach, takie jak: miejscowość, kraj, parametry skoczni,
* skoczkach, takie jak: imię, nazwisko, narodowość, data urodzin,
* skokach (dwóch, jeżeli skoczek skakał dwa razy lub jednego jeżeli nie zakwalifikował się do drugiej serii): prędkość, odległość, punkty do klasyfikacji.

Poniżej przedstawimy 6 wierszy z tego zbioru danych.

```{r,  message=FALSE}
head(skiJumps2013)
```

---

# Diagnoza społeczna

Ciekawym zbiorem danych jest wynik panelowego badania *Diagnoza Społeczna*. W ramach tego projektu co dwa lata ankietuje się osoby z wybranego zbioru gospodarstw domowych, za każdym razem tych samych gospodarstw. Podczas wywiadu członkowie gospodarstw są pytani o rozmaite zagadnienia, co pozwala na budowę obrazu przemian dziejących się w Polsce. Więcej o tym badaniu, wynikach jak i zbiorze danych można przeczytać na stronie interenetowej projektu http://diagnoza.com.

Zbiór danych w postaci gotowej do przetwarzania w programie R, znajduje się na stronie https://github.com/pbiecek/Diagnoza. Można go zainstalować poleceniem `install_github("pbiecek/Diagnoza")` po wcześniejszym włączeniu pakietu `library(devtools)`.

Cały zbiór danych jest bardzo duży i mogłby sprawiać trudności na mniejszych komputerach. Dlatego na potrzeby tego kursu przygotowaliśmy podzbiór zbioru danych z badania Diagnoza Społeczna.

Podzbiór danych nazywa się `diagnoza` i zawiera 38461 wierszy. Każdy wiersz to odpowiedzi innej osoby. Odpowiedzi uzyskane w badaniu ankietowym zapisane są w 36 kolumnach / zmiennych. Nazwy tych zmiennych odpowiadają numerom pytań z kwestionariusza http://diagnoza.com/pliki/kwestionariusze_instrukcje/kwestionariusze_2013.pdf. Opisy co znaczy które pytanie znajdują się w zbiorze danych `diagnozaDict`.

Wybrane zmienne opisują:

* imiona respondentów, 
* wagi analityczne, wynikające ze sposobu losowania, 
* liczbę lat nauki, płeć, wykształcenie, wzrost, wagę, dochody,
* odpowiedzi na wybrane pytania dotyczące światopoglądu.

Zbiór danych `diagnozaDict` opisuje nazwy kolumn ze zbioru danych `diagnoza`. Przedstawiamy opis pierwszych sześciu kolumn.

```{r,  message=FALSE}
head(diagnozaDict[,2,drop=FALSE])
```

Poniżej przedstawiamy dwa wybrane wiersze z tego zbioru danych.

```{r,  message=FALSE}
head(diagnoza, 2)
```

---

# Oceny odcinków seriali filmowych

Ten zbiór danych zbiera wyniki ocen odcinków 200 najpopularnijeszych seriali telewizyjnych.
Dane o ocenach oraz liczbie oddanych głosów są pobrane z serwisu http:///www.imdb.com. 
W zbiorze danych są również umieszczone nazwy seriali oraz nazwy poszczególnych odcinków.

Każdy wiersz opisuje jeden odcinek. Kolejne zmienne/kolumny opisują nazwę serialu, nazwę odcinka, numer sezonu, numer odcinak w sezonie, średnia ocena danego odcinka, liczba oddanych głosów, oraz identyfikator serialu używany e bazie IMDB.

```{r,  message=FALSE}
head(serialeIMDB)
```
