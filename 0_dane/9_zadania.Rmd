---
title: "Zadania i odpowiedzi"
author: "pogRomcy danych"
date: "sezon 0 / odcinek 0 <br><br><br><br>Naciśnij `A` by zamienić slajdy na ciągły tekst. <br> Naciśnij `T` by wyświetlić spis treści."
output:
  slidy_presentation:
    includes:
      in_header: ../tracking.html
    highlight: default
    css: ../style.css
    font_adjustment: 0
    footer: "pogRomcy danych / eksploracja danych / zadania i odpowiedzi"
---

# Zadanie, sezon 1, odcinek 5

W kolejnych odcinkach będziemy korzystać ze zbioru danych o cenach aut. 
Ten zbiór danych można pobrać ze strony kursu w różnych formatach pod następującymi linkami:

- dane Excelowe, http://biecek.pl/MOOC/dane/auta2012mini.xls

- dane tekstowe, http://biecek.pl/MOOC/dane/auta2012mini.csv

- dane binarne, http://biecek.pl/MOOC/dane/auta2012mini.rda

- w pakiecie `SmarterPoland` w zmiennej `auta2012`.

*Zadanie:* 

Wczytać do programu R dane wykorzystując każdy z tych formatów.

*Uwaga!* Wskazane pliki mają do 3.5 MB wielkości. Ich pobieranie może trochę potrwać jeżeli połączenie internetowe nie jest dobre lub wiele osób jednocześnie z niego korzysta.

---

# Odpowiedzi, sezon 1, odcinek 5

```{r, eval=FALSE}
# plik tekstowy
auta2012 <- read.table(file = "http://biecek.pl/MOOC/dane/auta2012mini.csv", 
          sep=";", dec=",", header=TRUE)

# plik Excela
library(gdata)
auta2012 <- read.xls("http://biecek.pl/MOOC/dane/auta2012mini.xls", sheet=1)

# plik rda
# nie trzeba przypisywać do zmiennej
load(url("http://biecek.pl/MOOC/dane/auta2012mini.rda"))

```

---

# Zadanie, sezon 1, odcinek 6

- Zapisz zbiór danych `koty_ptaki` do pliku tekstowego, w którym dane są rozdzielane przecinkiem a kropką dziesiętną jest `.`
- Zapisz zbiór danych `koty_ptaki` do formatu pliku Excela. Sprawdź czy dane poprawnie się zapisały.
- Zapisz zbiór danych `koty_ptaki` do pliku binarnego. Odczytaj go następnie funkcją `load()` i sprawdź czy dane poprawnie zostały zapisane.

---

# Odpowiedzi, sezon 1, odcinek 6

```{r, eval=FALSE}
# plik tekstowy
write.table(koty_ptaki, file = "dane_o_kotach.csv", sep=",", dec=".")

# plik Excela
library(xlsx)
write.xls(koty_ptaki, file = "koty_ptaki.xlsx", sheetName="Zakladka 1")

# dane binarne
save(koty_ptaki, file="koty_ptaki.rda")
load("koty_ptaki.rda")
```

---

# Zadania, sezon 1, odcinek 7

- Zbuduj sekwencję dziesięciu kolejnych małych liter alfabetu łacińskiego.

- Zbuduj sekwencję dziesięciu kolejnych liczb nieparzystych zaczynając od `3`.

- Z wektora `LETTERS` wybierz litery na pozycjach 5, 10, 15, 20 i 25.

- Wypisz wartości wektora `LETTERS` od końca.

---

# Odpowiedzi, sezon 1, odcinek 7

```{r}
# kolejne litery
c('a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j')
letters[1:10]

# nieparzyste od 3
seq(3, 21, 2)

# wybrane z LETTERS
LETTERS[c(5, 10, 15, 20, 25)]

# od końca wektor LETTERS
LETTERS[26:1]
```

---

# Zadania, sezon 1, odcinek 7

- Wybierz z ramki danych `koty_ptaki` wszystkie wiersze poza ,,Sokołami'' (wiersz 11 i 12)

- Wybierz z ramki danych `koty_ptaki` tylko koty (pierwsze siedem wierszy)

- Wybierz z ramki danych `koty_ptaki` tylko kolumnę z wagą i prędkością

- Wybierz z ramki danych `koty_ptaki` wszystkie kolumny poza ostatnią

- Wybierz z ramki wiersze dla których waga jest mniejsza niż 100 oraz cztery pierwsze kolumny.

---

# Odpowiedzi, sezon 1, odcinek 7

```{r, eval=FALSE}
# poza sokołami
koty_ptaki[- (11:12), ]
koty_ptaki[c(1:10, 13), ]

# tylko koty
koty_ptaki[1:7, ]
koty_ptaki[koty_ptaki$druzyna == "Kot", ]

# tylko dwie kolumny
koty_ptaki[, c("waga", "predkosc")]
koty_ptaki[, c(2, 4)]

# poza ostatnią
koty_ptaki[, 1:6]
koty_ptaki[, -7]

# lekkie 
koty_ptaki[koty_ptaki$waga < 100, 1:4]
```

---

# Zadania, sezon 1, odcinek 8

* Napisz pętlę, która dla każdego wiersza z tabeli `koty_ptaki` wypisze żywotność określonego gatunku.
* Napisz pętlę, która przedstawi żywotność za pomocą wykresu, na którym każdy rok przedstawiony jest jako jeden `#`.
* Napisz pętlę, która narysuje wykres z żywotnością, ale z nazwami gatunku po lewej stronie. Co więcej, przed każdą nazwą gatunku należy dodać tyle znaków spacja, aby nazwy były wyrównane do prawej strony. Długość napisu, mierzoną w liczbie znaków można odczytać funkcją `nchar()`.

---

# Odpowiedzi, sezon 1, odcinek 8

```{r, eval=FALSE}
# Pętla z żywotnością
for (i in 1:nrow(koty_ptaki)) {
  cat("Osobniki gatunku:", koty_ptaki[i,"gatunek"], "żyją do", 
      koty_ptaki[i,"zywotnosc"], "lat\n")
}

# Żywotność za pomocą wykresu
for (i in 1:nrow(koty_ptaki)) {
  n_kropek <- koty_ptaki[i,"zywotnosc"] 
  for (j in 1:n_kropek)
    cat("#")
  cat(" ", koty_ptaki[i,"gatunek"], "\n")
}

# Nazwa gatunku po lewej stronie
for (i in 1:nrow(koty_ptaki)) {
  # uzupełniamy spacje
  n_spacji <- 15 - nchar(as.character(koty_ptaki[i,"gatunek"])) 
  for (j in 1:n_spacji)
    cat(" ")
  cat( koty_ptaki[i,"gatunek"], " ")
  # wykres rysuje żytowność za pomocą #
  n_kropek <- koty_ptaki[i,"zywotnosc"] 
  for (j in 1:n_kropek)
    cat("#")
  cat("\n")
}

```

---

# Zadania, sezon 1, odcinek 9

* Napisz instrukcję warunkową, która dla zwierząt lżejszych niż 1kg wypisze `lekkie`, a dla cięższych niż 1 kg `ciężkie`.
* Napisz instrukcję warunkową, która dla zwierząt lżejszych niż 1kg wypisze `lekkie`, cięższych niż 100kg wypisze `ciężkie` a w przedziale 1-100kg wypisze `średnie`. Taki efekt można uzyskać stosując dwie instrukcje `if()` lub korzystając z funkcji `switch()`.
* Napisz pętlę i instrukcję warunkową sumującą łączną masę wszystkich ptaków i osobno kotów.

---

# Odpowiedzi, sezon 1, odcinek 9

```{r, eval=FALSE}
# Lekkie / ciężkie
for (i in 1:nrow(koty_ptaki)) {
  if (koty_ptaki[i,"waga"] < 100) {
    cat(koty_ptaki[i,"gatunek"], "to lekkie zwierze.\n")
  } else {
    cat(koty_ptaki[i,"gatunek"], "to ciężkie zwierze.\n")
  }
}

# Lekkie / średnie / ciężkie
for (i in 1:nrow(koty_ptaki)) {
  if (koty_ptaki[i,"waga"] < 1) {
    cat(koty_ptaki[i,"gatunek"], "to lekkie zwierze.\n")
  } else {
    if (koty_ptaki[i,"waga"] < 100) {
      cat(koty_ptaki[i,"gatunek"], "to średnie zwierze.\n")
    } else {
      cat(koty_ptaki[i,"gatunek"], "to ciężkie zwierze.\n")
    }
  }
}

# Ważymy koty i ptaki
wagaKoty <- 0
wagaPtaki <- 0
for (i in 1:nrow(koty_ptaki)) {
  if (koty_ptaki[i,"druzyna"] == "Kot") {
    wagaKoty <- wagaKoty + koty_ptaki[i,"waga"]
  } else {
    wagaPtaki <- wagaPtaki + koty_ptaki[i,"waga"]
  }
}
```

---

# Zadania, sezon 1, odcinek 10

* Napisz funkcję, która otrzymuje argument liczbowy a następnie wypisuje na ekran wartości od argumentu do jeden.
* Napisz funkcję, przyjmuje argument liczbowy `n` a następnie rysuje kwadrat o boku `n` wypełniony znakami `X`.
* Napisz funkcję, przyjmuje argument liczbowy `n` a następnie rysuje kwadrat o boku `n` ze znakami `X` na brzegu i pusty w środku.

---

# Odpowiedzi, sezon 1, odcinek 10

```{r, eval=FALSE}
# odliczanie do 1
odliczaj <- function(od = 10) {
  for (i in od:1) {
    cat(i, "\n")
  }
}
odliczaj(5)

# rysuj kwadrat
kwadrat <- function(n = 5, znak="X") {
  for (i in 1:n) {
    for (j in 1:n) {
      cat(znak)
    }
    cat("\n")
  }
}
kwadrat()

# rysuj pusty kwadrat
pustyKwadrat <- function(n = 5, znak="X") {
  for (i in 1:n) {
    for (j in 1:n) {
      if (i == 1 | j == 1 | i == n | j == n) {
        cat(znak)
      } else {
        cat (" ")
      }
    }
    cat("\n")
  }
}
pustyKwadrat()
```

---

# Zadania, sezon 1, odcinek 11

+ W zbiorze danych _auta2012_ aż 7 cech to cechy ilościowe. Wymień które.

+ Jedną z cech ilościowych jest _Rok.produkcji_. Wszystkie te oferty były złożone w roku 2012, jaki był medianowy/połówkowy wiek oferowanego auta?

+ Która cecha jest najmniej kompletna? Dla której cechy liczba brakujących wartości jest największa?

+ Jaka jest mediana/połówkowa wielkość silnika (`Pojemnosc.skokowa`)?

+ Przedstaw graficznie za pomocą wykresu pudełko-wąsy oraz histogramu rozkład cechy `Cena.w.PLN`. 

+ Zwróć uwagę, że pojedyncze auta o bardzo wysokich cenach, powodują że wykres jest mało czytelny. Oczyść te dane, pozostawiają tylko auta o cenie poniżej 100 tys pln. Następnie przedstaw rozkład cen aut w segmencie aut do 100 tys pln.

+ Aut w jakiej cenie jest najwięcej wśród zebranych ogłoszeń?


---

# Odpowiedzi, sezon 1, odcinek 11

```{r, eval=FALSE}
# Zmienne ilościowe
# `Cena`, `Cena.w.PLN`, `KM`, `kW`, `Pojemnosc.skokowa`, `Przebieg.w.km`, `Rok.produkcji`

# medianowy wiek to 2012 - mediana roku produkcji
2012 - median(auta2012$Rok.produkcji)

# Dla zmiennej `Przebieg.w.km`  jest 39 559 brakujących wartości. Ta zmienna jest najmniej kompletna.

# mediana koni mechanicznych
median(auta2012$KM, na.rm=TRUE)

# Usuńmy skrajne obserwacje i narysujmy rozkłąd ceny aut wykresem pudełkowym
auta2012wybrane <- auta2012[auta2012$Cena.w.PLN < 100000, ] 
boxplot(auta2012wybrane$Cena.w.PLN, horizontal = TRUE, range = 0)

# lub histogramem
hist(auta2012wybrane$Cena.w.PLN, 50, col="grey")
```

```
