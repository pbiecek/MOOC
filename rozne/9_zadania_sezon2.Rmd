---
title: "Zadania i odpowiedzi"
author: "pogRomcy danych"
date: "sezon 2 / odcinek 23 <br><br> <a href='http://biecek.pl/'>Przemysław Biecek @ Uniwersytet Warszawski</a><br><br><br>Naciśnij `A` by zamienić slajdy na ciągły tekst. <br> Naciśnij `T` by wyświetlić spis treści."
output:
  slidy_presentation:
    includes:
      in_header: ../tracking.html
    highlight: default
    css: ../style.css
    font_adjustment: 0
    footer: "pogRomcy danych / wizualizacja / zadania i odpowiedzi"
---

#  Zadanie 1

Wykres wykonany z użyciem funkcji `ggplot()` można przypisać do zmiennej tak jak dowolny obiekt w R. 
Instrukcja `moj_wykres <- ggplot(...) + geom_point()` przypisze wykres do zmiennej.

Zadanie:
Na bazie danych `koty_ptaki` zbuduj wykres przedstawiający za pomocą punktów wiersze z tego zbioru danych.
Na osi OX powinna znajdować się długość a na osi OY prędkość.
Wykres przypisz do zmiennej o nazwie `wynik`.

Rozwiązanie
```{r, eval=FALSE}
wynik <- ggplot(koty_ptaki, aes(x=dlugosc, y=predkosc)) + geom_point()
```

Test
```{r, eval=FALSE}
geometrie <- sapply(wynik$layers, function(x) x$geom$objname)
mapowania <- as.character(sapply(wynik$mapping, function(x) x))

isCorrectM <- all(c("dlugosc", "predkosc") %in% mapowania)
isCorrectG <- "point" %in% geometrie
isCorrect <- isCorrectM &&  isCorrectG
comments <- ""
if (!exists("wynik")) comments <- paste(comments, "Brak zmiennej o nazwie wynik. ")
if (!isCorrectM) comments <- paste(comments, "Niepoprawne zmienne na osiach. ")
if (!isCorrectG) comments <- paste(comments, "Brak geometrii z punktami. ")
if (!isCorrect) comments <- paste(comments, "To nie jest poprawna odpowiedź")
```


# Zadanie 2

Na bazie danych `koty_ptaki` zbuduj wykres przedstawiający za pomocą punktów wiersze z tego zbioru danych.
Na osi OX powinna znajdować się długość a na osi OY prędkość.
Za pomocą kształtu i koloru punktów oznacz wartości z kolumny `druzyna`. 
Wykres przypisz do zmiennej o nazwie `wynik`.

Rozwiązanie
```{r, eval=FALSE}
wynik <- ggplot(koty_ptaki, aes(x=dlugosc, y=predkosc,
                                shape=druzyna, color=druzyna)) + geom_point()
```

Test
```{r, eval=FALSE}
geometrie <- sapply(wynik$layers, function(x) x$geom$objname)
mapowania <- lapply(sapply(wynik$mapping, function(x) x), as.character)

isCorrectM <- mapowania$colour == "druzyna" && mapowania$shape == "druzyna"
isCorrectG <- "point" %in% geometrie
isCorrect <- isCorrectM &&  isCorrectG
comments <- ""
if (!exists("wynik")) comments <- paste(comments, "Brak zmiennej o nazwie wynik. ")
if (!isCorrectM) comments <- paste(comments, "Kolor i kształt powinny opisywać zmienną drużyna. ")
if (!isCorrectG) comments <- paste(comments, "Brak geometrii z punktami. ")
if (!isCorrect) comments <- paste(comments, "To nie jest poprawna odpowiedź")
```

# Zadanie 3
Na bazie danych `koty_ptaki` zbuduj wykres przedstawiający dla gatunków długość oraz prędkość osobników.
Na osi OX powinna znajdować się długość a na osi OY prędkość.
Na wykresie w powinny znaleźć się nazwy gatunków we współrzędnych określonych przez ich długosć i prędkość. 
Wykres przypisz do zmiennej o nazwie `wynik`.

Rozwiązanie
```{r, eval=FALSE}
wynik <- ggplot(koty_ptaki, aes(x=dlugosc, y=predkosc,
                                label=gatunek)) + geom_text()
```

Test
```{r, eval=FALSE}
geometrie <- sapply(wynik$layers, function(x) x$geom$objname)
mapowania <- lapply(sapply(wynik$mapping, function(x) x), as.character)

isCorrectM <- mapowania$x == "dlugosc" && mapowania$y == "predkosc"
isCorrectG <- "text" %in% geometrie
isCorrect <- isCorrectM &&  isCorrectG
comments <- ""
if (!exists("wynik")) comments <- paste(comments, "Brak zmiennej o nazwie wynik. ")
if (!isCorrectM) comments <- paste(comments, "Osie powinny opisywać długość i prędkość. ")
if (!isCorrectG) comments <- paste(comments, "Brak geometrii z nazwami gatunków ")
if (!isCorrect) comments <- paste(comments, "To nie jest poprawna odpowiedź")
```


# Zadanie 4
Na bazie danych `koty_ptaki` zbuduj wykres przedstawiający dla gatunków długość oraz wagę osobników.
Na osi OX powinna znajdować się długość a na osi OY waga.
Na wykresie należy przedstawić przynajmniej dwie warstwy - dwie geometrie, jedną z puntkami a drugą z nazwami gatunków.
Wykres przypisz do zmiennej o nazwie `wynik`.

Rozwiązanie
```{r, eval=FALSE}
wynik <- ggplot(koty_ptaki, aes(x=dlugosc, y=waga,
                                label=gatunek)) + 
  geom_text() + geom_point()
```

Test
```{r, eval=FALSE}
geometrie <- sapply(wynik$layers, function(x) x$geom$objname)
mapowania <- lapply(sapply(wynik$mapping, function(x) x), as.character)

isCorrectM <- mapowania$x == "dlugosc" && mapowania$y == "waga" && mapowania$label == "gatunek"
isCorrectG <- all(c("text", "point") %in% geometrie)
isCorrect <- isCorrectM &&  isCorrectG
comments <- ""
if (!exists("wynik")) comments <- paste(comments, "Brak zmiennej o nazwie wynik. ")
if (!isCorrectM) comments <- paste(comments, "Osie powinny opisywać długość i wagę, na wykresie powinien być przedstawiony gatunek. ")
if (!isCorrectG) comments <- paste(comments, "Na wykresie powinna być przedstawiona geometria text i point. ")
if (!isCorrect) comments <- paste(comments, "To nie jest poprawna odpowiedź")
```


# Zadanie 5
Na bazie danych `koty_ptaki` zbuduj wykres przedstawiający dla gatunków długość oraz prędkość osobników.
Na osi OX powinna znajdować się długość a na osi OY prędkość.
Do wykresu dodaj linię trendu używając geometrii `smooth`.
Na wykresie należy przedstawić przynajmniej dwie warstwy - dwie geometrie, jedną z puntkami a drugą z trendem.
Wykres przypisz do zmiennej o nazwie `wynik`.

Rozwiązanie
```{r, eval=FALSE}
wynik <- ggplot(koty_ptaki, aes(x=dlugosc, y=predkosc)) + 
  geom_smooth() + geom_point() 
```

Test
```{r, eval=FALSE}
geometrie <- sapply(wynik$layers, function(x) x$geom$objname)
mapowania <- lapply(sapply(wynik$mapping, function(x) x), as.character)

isCorrectM <- mapowania$x == "dlugosc" && mapowania$y == "predkosc" 
isCorrectG <- all(c("smooth", "point") %in% geometrie)
isCorrect <- isCorrectM &&  isCorrectG
comments <- ""
if (!exists("wynik")) comments <- paste(comments, "Brak zmiennej o nazwie wynik. ")
if (!isCorrectM) comments <- paste(comments, "Osie powinny opisywać długość i prędkość. ")
if (!isCorrectG) comments <- paste(comments, "Na wykresie powinna być przedstawiona geometria text i smooth. ")
if (!isCorrect) comments <- paste(comments, "To nie jest poprawna odpowiedź")
```

