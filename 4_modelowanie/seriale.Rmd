```{r}
library(XML)

ltop <- readLines("http://graphtv.kevinformatics.com/top")
movies <- strsplit(paste(ltop, collapse=" "), split="<a href='/")[[1]]

ids <- sapply(strsplit(movies, split="'"), '[', 1)[-1]
names <- sapply(strsplit(movies, split="[<>]"), '[', 6)[-1] %>%
  gsub(., pattern="^ *[0-9]*\\. *", replacement="") %>%
  gsub(., pattern=" *$*", replacement="")





http://www.seriesmonitor.com/thebigbangtheory/graphs.html

# super
http://graphtv.kevinformatics.com/tt0412142



tables = readHTMLTable("http://www.imdb.com/title/tt1475582/epdate?ref_=ttep_ql_4")
names(tables)
tables[[1]]
tables = readHTMLTable("http://www.imdb.com/title/tt1871731/epdate?ref_=ttep_ql_4")
tables = readHTMLTable("http://www.imdb.com/title/tt0944947/epdate?ref_=ttep_ql_4")
names(tables)
tb <- tables[[1]]

sezon <- sapply(strsplit(as.character(tb[,1]), split=".", fixed=TRUE), `[`, 1)
ocena <- as.numeric(as.character(tb[,3]))
nazwa <- as.character(tb[,2])

df <- data.frame(id=seq_along(sezon), sezon, ocena, nazwa)

library(ggvis)
df %>% ggvis(x = ~ id, y = ~ ocena, fill = ~sezon) %>%
  layer_points() %>%
  layer_smooths()




lines <- readLines("http://thetvdb.com/?tab=seasonall&id=80379&lid=7")
lines <- readLines("http://thetvdb.com/?tab=seasonall&id=79168&lid=7")
lines <- readLines("http://thetvdb.com/?tab=seasonall&id=73255&lid=7")
lines <- grep(lines, pattern="<tr><td class=", value = TRUE)

linlin <- strsplit(lines, split='[<>\\"]')

sezony <- sapply(linlin, `[`, 11)
daty <- sapply(linlin, `[`, 31)
linki <- paste("http://thetvdb.com/", sapply(linlin, `[`, 21), sep="")

stars <- sapply(linki, function(l) {
  ll <- paste(readLines(l), collapse="")
  c(length(strsplit(ll, split="star.on.gif")[[1]])-4,
    length(strsplit(ll, split="star.off.gif")[[1]])-4)
})

summary(t(stars))

plot(stars[1,])

qplot()


tables = readHTMLTable("http://thetvdb.com/?tab=seasonall&id=80379&lid=7")
names(tables)

tables[[2]] 

```
